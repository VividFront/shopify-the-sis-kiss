<div class="product-grid-container visually-hidden" id="ProductGridContainer">
  {%- paginate collection.products by section.settings.products_per_page -%}
    {%- if collection.products.size == 0 -%}
      <div class="collection collection--empty page-width" id="product-grid" data-id="{{ section.id }}">
        <div class="loading-overlay gradient"></div>
        <div class="title-wrapper center">
          <h2 class="title title--primary">
            {{ 'sections.collection_template.empty' | t }}<br>
            {{ 'sections.collection_template.use_fewer_filters_html' | t: link: collection.url, class: "underlined-link link" }}
          </h2>
        </div>
      </div>
    {%- else -%}
      <ul id="product-grid" data-id="{{ section.id }}" class="grid gap-y-24 gap-x-16 grid-cols-2 lg:grid-cols-3">
        {%- for product in collection.products -%}
          {% assign lazy_load = false %}
          {%- if forloop.index > 6 -%}
            {%- assign lazy_load = true -%}
          {%- endif -%}
          <li class="col-span-1">
            {% render 'card-product',
              product: product,
              show_secondary_image: true,
              lazy_load: lazy_load,
              section_id: section.id
            %}
          </li>
        {%- endfor -%}
      </ul>

      {%- if paginate.pages > 1 -%}
        {% render 'pagination', paginate: paginate, anchor: '' %}
      {%- endif -%}
    {%- endif -%}
  {%- endpaginate -%}
</div>
